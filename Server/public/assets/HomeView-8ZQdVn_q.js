import{c as A,a as c,h as g,b as H,u as ue,g as we,Q as I,d as W,e as de,f as Se,r as w,w as fe,o as qe,T as Ve,i as Ne,_ as G,j as ve,k as y,l as L,m as q,t as T,n as N,p as z,q as f,s as ie,v as V,x as E,F as D,y as R,z as ee,A as oe,B as J,C as Be,D as Ie,E as F,G as Te,H as Le,I as X,J as se,K as ae,L as Pe,M as me,N as $e,O as Oe,P as Me,R as je,S as Qe,U as Y,V as Ae,W as Ue,X as Ee,Y as ze,Z as Fe,$ as Re,a0 as le,a1 as ge,a2 as he,a3 as be,a4 as De,a5 as K,a6 as re,a7 as He,a8 as Ke,a9 as We}from"./index-NP7I-YFR.js";const Ge=A({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const t=c(()=>{const a=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${a.length!==0?" "+a:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:t.value},H(o.default))}}),Je=A({name:"QBtnToggle",props:{...ue,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(o=>("label"in o||"icon"in o||"slot"in o)&&"value"in o)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:o,emit:t}){const a=c(()=>e.options.find(u=>u.value===e.modelValue)!==void 0),i=c(()=>({type:"hidden",name:e.name,value:e.modelValue})),n=de(i),r=c(()=>we(e)),l=c(()=>({rounded:e.rounded,dense:e.dense,...r.value})),v=c(()=>e.options.map((u,m)=>{const{attrs:k,value:C,slot:B,...x}=u;return{slot:B,props:{key:m,"aria-pressed":C===e.modelValue?"true":"false",...k,...x,...l.value,disable:e.disable===!0||x.disable===!0,color:C===e.modelValue?b(x,"toggleColor"):b(x,"color"),textColor:C===e.modelValue?b(x,"toggleTextColor"):b(x,"textColor"),noCaps:b(x,"noCaps")===!0,noWrap:b(x,"noWrap")===!0,size:b(x,"size"),padding:b(x,"padding"),ripple:b(x,"ripple"),stack:b(x,"stack")===!0,stretch:b(x,"stretch")===!0,onClick(S){h(C,u,S)}}}}));function h(u,m,k){e.readonly!==!0&&(e.modelValue===u?e.clearable===!0&&(t("update:modelValue",null,null),t("clear")):t("update:modelValue",u,m),t("click",k))}function b(u,m){return u[m]===void 0?e[m]:u[m]}function s(){const u=v.value.map(m=>g(I,m.props,m.slot!==void 0?o[m.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&a.value===!0&&n(u,"push"),W(o.default,u)}return()=>g(Ge,{class:"q-btn-toggle",...r.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},s)}}),pe=Se("notesStore",()=>{const e=w([]),o=async()=>{const n=await fetch("http://localhost:3000/");e.value=await n.json()};return{notes:e,fetchNotes:o,addNote:async n=>{const l=await(await fetch("http://localhost:3000/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();e.value.push(l)},updateNote:async(n,r)=>{await fetch(`http://localhost:3000/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),await o()},deleteNote:async n=>{await fetch(`http://localhost:3000/${n}`,{method:"DELETE"}),e.value=e.value.filter(r=>r.id!==n)}}}),Xe={ratio:[String,Number]};function Ye(e,o){return c(()=>{const t=Number(e.ratio||(o!==void 0?o.value:void 0));return isNaN(t)!==!0&&t>0?{paddingBottom:`${100/t}%`}:null})}const Ze=16/9,te=A({name:"QImg",props:{...Xe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ze},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:o,emit:t}){const a=w(e.initialRatio),i=Ye(e,a);let n=null,r=!1;const l=[w(null),w(B())],v=w(0),h=w(!1),b=w(!1),s=c(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),u=c(()=>({width:e.width,height:e.height})),m=c(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),k=c(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));fe(()=>C(),x);function C(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function B(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function x(d){n!==null&&(clearTimeout(n),n=null),b.value=!1,d===null?(h.value=!1,l[v.value^1].value=B()):h.value=!0,l[v.value].value=d}function S({target:d}){r!==!0&&(n!==null&&(clearTimeout(n),n=null),a.value=d.naturalHeight===0?.5:d.naturalWidth/d.naturalHeight,P(d,1))}function P(d,O){r===!0||O===1e3||(d.complete===!0?M(d):n=setTimeout(()=>{n=null,P(d,O+1)},50))}function M(d){r!==!0&&(v.value=v.value^1,l[v.value].value=null,h.value=!1,b.value=!1,t("load",d.currentSrc||d.src))}function j(d){n!==null&&(clearTimeout(n),n=null),h.value=!1,b.value=!0,l[v.value].value=null,l[v.value^1].value=B(),t("error",d)}function $(d){const O=l[d].value,Q={key:"img_"+d,class:m.value,style:k.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...O};return v.value===d?(Q.class+=" q-img__image--waiting",Object.assign(Q,{onLoad:S,onError:j})):Q.class+=" q-img__image--loaded",g("div",{class:"q-img__container absolute-full",key:"img"+d},g("img",Q))}function _(){return h.value!==!0?g("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},H(o[b.value===!0?"error":"default"])):g("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},o.loading!==void 0?o.loading():e.noSpinner===!0?void 0:[g(Ne,{color:e.spinnerColor,size:e.spinnerSize})])}return x(C()),qe(()=>{r=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const d=[];return i.value!==null&&d.push(g("div",{key:"filler",style:i.value})),b.value!==!0&&(l[0].value!==null&&d.push($(0)),l[1].value!==null&&d.push($(1))),d.push(g(Ve,{name:"q-transition--fade"},_)),g("div",{class:s.value,style:u.value,role:"img","aria-label":e.alt},d)}}}),et={props:{note:Object,onClick:Function,isListView:Boolean},computed:{completedTodos(){return this.note.type==="todo"?this.note.items.filter(e=>e.completed).length:0},totalTodos(){return this.note.type==="todo"?this.note.items.length:0}}},tt={key:0,class:"row items-center q-pa-md"},ot={class:"col"},at={class:"text-h6"},lt={key:0,class:"text-caption text-muted-foreground row items-center"},nt={key:1,class:"text-caption text-muted-foreground ellipsis"},it={class:"text-h6"},st={key:0},rt={key:0,class:"text-caption text-muted-foreground"},ct={class:"text-caption text-muted-foreground row items-center"},ut={key:1},dt={class:"ellipsis"};function ft(e,o,t,a,i,n){const r=ve("q-audio");return y(),L(J,{onClick:t.onClick,class:ee(["cursor-pointer hover-shadow-lg bg-card text-card-foreground",{"row items-center":t.isListView}])},{default:q(()=>[t.isListView?(y(),V("div",tt,[N("div",ot,[N("h3",at,T(t.note.title||"Untitled"),1),t.note.type==="todo"?(y(),V("p",lt,[f(z,{name:"check_square",size:"16px",class:"q-mr-xs"}),ie(" "+T(n.completedTodos)+"/"+T(n.totalTodos)+" completed ",1)])):(y(),V("p",nt,T(t.note.content),1))]),t.note.image?(y(),L(te,{key:0,src:t.note.image||"/placeholder.svg",alt:"Note image",class:"col-auto q-ml-md",style:{width:"48px",height:"48px","border-radius":"4px","object-fit":"cover"}},null,8,["src"])):E("",!0)])):(y(),V(D,{key:1},[f(R,null,{default:q(()=>[N("div",it,T(t.note.title||"Untitled"),1)]),_:1}),f(R,null,{default:q(()=>[t.note.type==="todo"?(y(),V("div",st,[(y(!0),V(D,null,oe(t.note.items.slice(0,3),(l,v)=>(y(),V("div",{key:l.id,class:ee(["text-body2",{"text-strike text-muted-foreground":l.completed}])},T(l.text||"Untitled item"),3))),128)),t.note.items.length>3?(y(),V("p",rt," +"+T(t.note.items.length-3)+" more items ",1)):E("",!0),N("p",ct,[f(z,{name:"check_square",size:"16px",class:"q-mr-xs"}),ie(" "+T(n.completedTodos)+"/"+T(n.totalTodos)+" completed ",1)])])):(y(),V("div",ut,[N("p",dt,T(t.note.content),1),t.note.image?(y(),L(te,{key:0,src:t.note.image||"/placeholder.svg",alt:"Note image",class:"q-mt-md",style:{width:"100%",height:"128px","border-radius":"4px","object-fit":"cover"}},null,8,["src"])):E("",!0),t.note.voiceMemo?(y(),L(r,{key:1,src:t.note.voiceMemo,controls:"",class:"q-mt-md"},null,8,["src"])):E("",!0)]))]),_:1})],64))]),_:1},8,["onClick","class"])}const vt=G(et,[["render",ft],["__scopeId","data-v-1e2132e1"]]),mt=g("div",{class:"q-space"}),gt=A({name:"QSpace",setup(){return()=>mt}});function ht(e,o){const t=w(null),a=c(()=>e.disable===!0?null:g("span",{ref:t,class:"no-outline",tabindex:-1}));function i(n){const r=o.value;n!==void 0&&n.type.indexOf("key")===0?r!==null&&document.activeElement!==r&&r.contains(document.activeElement)===!0&&r.focus():t.value!==null&&(n===void 0||r!==null&&r.contains(n.target)===!0)&&t.value.focus()}return{refocusTargetEl:a,refocusTarget:i}}const bt={xs:30,sm:35,md:40,lg:50,xl:60},pt={...Te,...Le,...ue,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},yt=["update:modelValue"];function _t(e,o){const{props:t,slots:a,emit:i,proxy:n}=X(),{$q:r}=n,l=Be(t,r),v=w(null),{refocusTargetEl:h,refocusTarget:b}=ht(t,v),s=Ie(t,bt),u=c(()=>t.val!==void 0&&Array.isArray(t.modelValue)),m=c(()=>{const p=F(t.val);return u.value===!0?t.modelValue.findIndex(U=>F(U)===p):-1}),k=c(()=>u.value===!0?m.value>-1:F(t.modelValue)===F(t.trueValue)),C=c(()=>u.value===!0?m.value===-1:F(t.modelValue)===F(t.falseValue)),B=c(()=>k.value===!1&&C.value===!1),x=c(()=>t.disable===!0?-1:t.tabindex||0),S=c(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(l.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),P=c(()=>{const p=k.value===!0?"truthy":C.value===!0?"falsy":"indet",U=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?k.value===!0:C.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${p}${U}`}),M=c(()=>{const p={type:"checkbox"};return t.name!==void 0&&Object.assign(p,{".checked":k.value,"^checked":k.value===!0?"checked":void 0,name:t.name,value:u.value===!0?t.val:t.trueValue}),p}),j=de(M),$=c(()=>{const p={tabindex:x.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":B.value===!0?"mixed":k.value===!0?"true":"false"};return t.disable===!0&&(p["aria-disabled"]="true"),p});function _(p){p!==void 0&&(se(p),b(p)),t.disable!==!0&&i("update:modelValue",d(),p)}function d(){if(u.value===!0){if(k.value===!0){const p=t.modelValue.slice();return p.splice(m.value,1),p}return t.modelValue.concat([t.val])}if(k.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(C.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function O(p){(p.keyCode===13||p.keyCode===32)&&se(p)}function Q(p){(p.keyCode===13||p.keyCode===32)&&_(p)}const xe=o(k,B);return Object.assign(n,{toggle:_}),()=>{const p=xe();t.disable!==!0&&j(p,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const U=[g("div",{class:P.value,style:s.value,"aria-hidden":"true"},p)];h.value!==null&&U.push(h.value);const ne=t.label!==void 0?W(a.default,[t.label]):H(a.default);return ne!==void 0&&U.push(g("div",{class:`q-${e}__label q-anchor--skip`},ne)),g("div",{ref:v,class:S.value,...$.value,onClick:_,onKeydown:O,onKeyup:Q},U)}}const kt=g("div",{key:"svg",class:"q-checkbox__bg absolute"},[g("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[g("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),g("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ct=A({name:"QCheckbox",props:pt,emits:yt,setup(e){function o(t,a){const i=c(()=>(t.value===!0?e.checkedIcon:a.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[g("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[g(z,{class:"q-checkbox__icon",name:i.value})])]:[kt]}return _t("checkbox",o)}}),xt=["top","right","bottom","left"],ye={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>xt.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function _e(e,o){return{formClass:c(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:c(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:c(()=>{if(e.externalLabel===!0){const t=e.hideLabel===null?o.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(t===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ke={start:"self-end",center:"self-center",end:"self-start"},wt=Object.keys(ke),Z=A({name:"QFabAction",props:{...ye,icon:{type:String,default:""},anchor:{type:String,validator:e=>wt.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:o,emit:t}){const a=ae(me,()=>({showing:{value:!0},onChildClick:Pe})),{formClass:i,labelProps:n}=_e(e,a.showing),r=c(()=>{const s=ke[e.anchor];return i.value+(s!==void 0?` ${s}`:"")}),l=c(()=>e.disable===!0||a.showing.value!==!0);function v(s){a.onChildClick(s),t("click",s)}function h(){const s=[];return o.icon!==void 0?s.push(o.icon()):e.icon!==""&&s.push(g(z,{name:e.icon})),(e.label!==""||o.label!==void 0)&&s[n.value.action](g("div",n.value.data,o.label!==void 0?o.label():[e.label])),W(o.default,s)}const b=X();return Object.assign(b.proxy,{click:v}),()=>g(I,{class:r.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:v},h)}}),St=["up","right","down","left"],qt=["left","center","right"],Vt=A({name:"QFab",props:{...ye,...$e,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>St.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>qt.includes(e)}},emits:Oe,setup(e,{slots:o}){const t=w(null),a=w(e.modelValue===!0),i=Me(),{proxy:{$q:n}}=X(),{formClass:r,labelProps:l}=_e(e,a),v=c(()=>e.persistent!==!0),{hide:h,toggle:b}=je({showing:a,hideOnRouteChange:v}),s=c(()=>({opened:a.value})),u=c(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${r.value}`+(a.value===!0?" q-fab--opened":" q-fab--closed")),m=c(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${a.value===!0?"opened":"closed"}`),k=c(()=>{const S={id:i,role:"menu"};return a.value!==!0&&(S["aria-hidden"]="true"),S}),C=c(()=>`q-fab__icon-holder  q-fab__icon-holder--${a.value===!0?"opened":"closed"}`);function B(S,P){const M=o[S],j=`q-fab__${S} absolute-full`;return M===void 0?g(z,{class:j,name:e[P]||n.iconSet.fab[P]}):g("div",{class:j},M(s.value))}function x(){const S=[];return e.hideIcon!==!0&&S.push(g("div",{class:C.value},[B("icon","icon"),B("active-icon","activeIcon")])),(e.label!==""||o.label!==void 0)&&S[l.value.action](g("div",l.value.data,o.label!==void 0?o.label(s.value):[e.label])),W(o.tooltip,S)}return Qe(me,{showing:a,onChildClick(S){h(S),t.value!==null&&t.value.$el.focus()}}),()=>g("div",{class:u.value},[g(I,{ref:t,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i,onClick:b},x),g("div",{class:m.value,...k.value},H(o.default))])}}),Nt={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Bt(){const{props:e,proxy:{$q:o}}=X(),t=ae(Ae,Y);if(t===Y)return console.error("QPageSticky needs to be child of QLayout"),Y;const a=c(()=>{const s=e.position;return{top:s.indexOf("top")>-1,right:s.indexOf("right")>-1,bottom:s.indexOf("bottom")>-1,left:s.indexOf("left")>-1,vertical:s==="top"||s==="bottom",horizontal:s==="left"||s==="right"}}),i=c(()=>t.header.offset),n=c(()=>t.right.offset),r=c(()=>t.footer.offset),l=c(()=>t.left.offset),v=c(()=>{let s=0,u=0;const m=a.value,k=o.lang.rtl===!0?-1:1;m.top===!0&&i.value!==0?u=`${i.value}px`:m.bottom===!0&&r.value!==0&&(u=`${-r.value}px`),m.left===!0&&l.value!==0?s=`${k*l.value}px`:m.right===!0&&n.value!==0&&(s=`${-k*n.value}px`);const C={transform:`translate(${s}, ${u})`};return e.offset&&(C.margin=`${e.offset[1]}px ${e.offset[0]}px`),m.vertical===!0?(l.value!==0&&(C[o.lang.rtl===!0?"right":"left"]=`${l.value}px`),n.value!==0&&(C[o.lang.rtl===!0?"left":"right"]=`${n.value}px`)):m.horizontal===!0&&(i.value!==0&&(C.top=`${i.value}px`),r.value!==0&&(C.bottom=`${r.value}px`)),C}),h=c(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function b(s){const u=H(s.default);return g("div",{class:h.value,style:v.value},e.expand===!0?u:[g("div",u)])}return{$layout:t,getStickyContent:b}}const It=A({name:"QPageSticky",props:Nt,setup(e,{slots:o}){const{getStickyContent:t}=Bt();return()=>t(o)}});function ce(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const Ce=Ue({name:"close-popup",beforeMount(e,{value:o}){const t={depth:ce(o),handler(a){t.depth!==0&&setTimeout(()=>{const i=Ee(e);i!==void 0&&ze(i,a,t.depth)})},handlerKey(a){Fe(a,13)===!0&&t.handler(a)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:o,oldValue:t}){o!==t&&(e.__qclosepopup.depth=ce(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});function Tt(){return ae(Re)}const Lt={name:"CameraPreview",emits:["capture","close"],setup(e,{emit:o}){const t=w(null);let a=null;const i=async()=>{try{a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),t.value&&(t.value.srcObject=a)}catch(l){console.error("Error accessing camera:",l),o("close")}},n=()=>{a&&a.getTracks().forEach(l=>l.stop())},r=()=>{const l=document.createElement("canvas");l.width=t.value.videoWidth,l.height=t.value.videoHeight,l.getContext("2d").drawImage(t.value,0,0);const v=l.toDataURL("image/jpeg");o("capture",v),n()};return le(()=>{i()}),ge(()=>{n()}),{videoElement:t,captureImage:r}}},Pt={ref:"videoElement",autoplay:"",playsinline:"",class:"full-width"};function $t(e,o,t,a,i,n){return y(),L(J,{class:"camera-preview"},{default:q(()=>[f(R,null,{default:q(()=>[N("video",Pt,null,512)]),_:1}),f(he,{align:"right"},{default:q(()=>[be(f(I,{flat:"",label:"Close",color:"primary"},null,512),[[Ce]]),f(I,{flat:"",label:"Capture",color:"primary",onClick:a.captureImage},null,8,["onClick"])]),_:1})]),_:1})}const Ot=G(Lt,[["render",$t],["__scopeId","data-v-a46b76bb"]]),Mt={name:"NoteModal",components:{CameraPreview:Ot},props:{note:{type:Object,required:!0}},emits:["update","delete","close"],setup(e,{emit:o}){const t=Tt(),a=w(!0),i=De({...e.note}),n=w(null),r=w(!1),l=w(!1),v=w(null),h=w([]);fe(()=>e.note,_=>{Object.assign(i,_)});const b=()=>{s(i)?o("delete",i.id):o("update",i),o("close")},s=_=>_.title.trim()===""&&_.content.trim()===""&&!_.image&&!_.voiceMemo&&(_.type!=="todo"||_.items&&_.items.every(d=>d.text.trim()==="")),u=()=>{o("update",i),a.value=!1},m=()=>{t.dialog({title:"Confirm",message:"Are you sure you want to delete this note?",cancel:!0,persistent:!0}).onOk(()=>{o("delete",i.id),a.value=!1})},k=()=>{i.type==="todo"&&i.items.push({id:Date.now(),text:"",completed:!1})},C=(_,d)=>{i.type==="todo"&&(i.items[_].text=d)},B=()=>{n.value.click()},x=_=>{const d=_.target.files[0];if(d){const O=new FileReader;O.onload=Q=>{i.image=Q.target.result},O.readAsDataURL(d)}},S=()=>{i.image=null},P=()=>{r.value=!0},M=_=>{i.image=_,r.value=!1},j=async()=>{if(l.value)$();else try{const _=await navigator.mediaDevices.getUserMedia({audio:!0});v.value=new MediaRecorder(_),v.value.ondataavailable=d=>{h.value.push(d.data)},v.value.onstop=()=>{const d=new Blob(h.value,{type:"audio/webm"});i.voiceMemo=URL.createObjectURL(d),h.value=[]},v.value.start(),l.value=!0}catch(_){console.error("Error accessing microphone:",_),t.notify({color:"negative",message:"Error accessing microphone. Please check your permissions."})}},$=()=>{v.value&&v.value.state!=="inactive"&&(v.value.stop(),l.value=!1)};return le(()=>{window.addEventListener("beforeunload",$)}),ge(()=>{window.removeEventListener("beforeunload",$),$()}),{showModal:a,editedNote:i,fileInput:n,showCamera:r,recording:l,closeModal:b,saveNote:u,deleteNote:m,addTodoItem:k,updateTodoItem:C,triggerFileInput:B,handleFileUpload:x,removeImage:S,openCamera:P,handleCameraCapture:M,toggleRecording:j}}},jt={class:"text-h6"},Qt={key:2,class:"q-mt-md"},At={class:"absolute-top-right"},Ut={key:3,class:"q-mt-md"},Et=["src"];function zt(e,o,t,a,i,n){const r=ve("camera-preview");return y(),L(re,{modelValue:a.showModal,"onUpdate:modelValue":o[5]||(o[5]=l=>a.showModal=l),onHide:a.closeModal,maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:q(()=>[f(J,{class:"column full-height"},{default:q(()=>[f(R,{class:"row items-center q-pb-none"},{default:q(()=>[N("div",jt,T(a.editedNote.title||"Untitled"),1),f(gt),be(f(I,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ce]])]),_:1}),f(R,{class:"q-pa-sm flex-grow-1 overflow-auto"},{default:q(()=>[f(K,{modelValue:a.editedNote.title,"onUpdate:modelValue":o[0]||(o[0]=l=>a.editedNote.title=l),label:"Title",dense:"",autofocus:"",class:"q-mb-md"},null,8,["modelValue"]),a.editedNote.type==="todo"?(y(),V(D,{key:0},[(y(!0),V(D,null,oe(a.editedNote.items,(l,v)=>(y(),V("div",{key:l.id,class:"q-mb-sm"},[f(Ct,{modelValue:l.completed,"onUpdate:modelValue":[h=>l.completed=h,h=>a.updateTodoItem(v,l.text)],label:l.text},null,8,["modelValue","onUpdate:modelValue","label"]),f(K,{modelValue:l.text,"onUpdate:modelValue":[h=>l.text=h,h=>a.updateTodoItem(v,h)],dense:"",class:"q-ml-lg"},null,8,["modelValue","onUpdate:modelValue"])]))),128)),f(I,{label:"Add Item",icon:"add",color:"primary",onClick:a.addTodoItem,class:"q-mt-sm"},null,8,["onClick"])],64)):(y(),L(K,{key:1,modelValue:a.editedNote.content,"onUpdate:modelValue":o[1]||(o[1]=l=>a.editedNote.content=l),type:"textarea",label:"Content",autogrow:""},null,8,["modelValue"])),a.editedNote.image?(y(),V("div",Qt,[f(te,{src:a.editedNote.image,"spinner-color":"primary",style:{"max-height":"600px"}},{default:q(()=>[N("div",At,[f(I,{round:"",color:"negative",icon:"delete",size:"sm",onClick:a.removeImage},null,8,["onClick"])])]),_:1},8,["src"])])):E("",!0),a.editedNote.voiceMemo?(y(),V("div",Ut,[N("audio",{src:a.editedNote.voiceMemo,controls:"",class:"full-width"},null,8,Et)])):E("",!0)]),_:1}),f(he,{position:"bottom-left"},{default:q(()=>[f(I,{flat:"",color:"negative",label:"Delete",onClick:a.deleteNote},null,8,["onClick"]),f(I,{flat:"",color:"primary",label:"Save",onClick:a.saveNote},null,8,["onClick"])]),_:1}),f(It,{position:"bottom-right",offset:[18,18]},{default:q(()=>[f(Vt,{icon:"add",direction:"up",color:"primary"},{default:q(()=>[f(Z,{color:"primary",icon:"attach_file",onClick:a.triggerFileInput},null,8,["onClick"]),f(Z,{color:"primary",icon:"photo_camera",onClick:a.openCamera},null,8,["onClick"]),f(Z,{color:"primary",icon:a.recording?"stop":"mic",onClick:a.toggleRecording},null,8,["icon","onClick"])]),_:1})]),_:1})]),_:1}),N("input",{type:"file",ref:"fileInput",accept:"image/*",style:{display:"none"},onChange:o[2]||(o[2]=(...l)=>a.handleFileUpload&&a.handleFileUpload(...l))},null,544),f(re,{modelValue:a.showCamera,"onUpdate:modelValue":o[4]||(o[4]=l=>a.showCamera=l)},{default:q(()=>[f(r,{onCapture:a.handleCameraCapture,onClose:o[3]||(o[3]=l=>a.showCamera=!1)},null,8,["onCapture"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onHide"])}const Ft=G(Mt,[["render",zt],["__scopeId","data-v-d2ac1886"]]),Rt={name:"QuickCreateArea",emits:["create-note"],setup(e,{emit:o}){const t=w(!1),a=pe();return{expanded:t,expandArea:()=>{t.value=!0},createNote:async r=>{const l={title:"",content:"",type:r,...r==="todo"?{items:[]}:{}};await a.addNote(l),o("create-note",l),t.value=!1}}}},Dt=e=>(He("data-v-6037507c"),e=e(),Ke(),e),Ht={key:0,class:"row items-center"},Kt=Dt(()=>N("div",{class:"text-primary q-ml-sm"},"Click to create...",-1)),Wt={key:1,class:"column q-gutter-y-sm"};function Gt(e,o,t,a,i,n){return y(),L(J,{class:"quick-create-area cursor-pointer",onClick:a.expandArea},{default:q(()=>[f(R,null,{default:q(()=>[a.expanded?(y(),V("div",Wt,[f(I,{flat:"",color:"primary",icon:"note_add",label:"Create a new note",onClick:o[0]||(o[0]=r=>a.createNote("note"))}),f(I,{flat:"",color:"primary",icon:"checklist",label:"Create a to-do list",onClick:o[1]||(o[1]=r=>a.createNote("todo"))})])):(y(),V("div",Ht,[f(z,{name:"add",size:"sm",color:"primary"}),Kt]))]),_:1})]),_:1},8,["onClick"])}const Jt=G(Rt,[["render",Gt],["__scopeId","data-v-6037507c"]]),Xt={class:"row q-col-gutter-md"},Yt={class:"col-12"},Zt={class:"col-12"},eo={class:"col-12"},oo={__name:"HomeView",setup(e){const o=pe(),t=w(""),a=w(null),i=w("grid"),n=c(()=>o.notes.filter(s=>s.title.toLowerCase().includes(t.value.toLowerCase())||s.content.toLowerCase().includes(t.value.toLowerCase()))),r=async s=>{const u={title:"",content:"",type:s,...s==="todo"?{items:[]}:{}};await o.addNote(u),a.value=u},l=async s=>{await o.updateNote(s.id,s),a.value=null},v=async s=>{await o.deleteNote(s),a.value=null},h=s=>{a.value=s},b=()=>{a.value=null};return le(()=>{o.fetchNotes()}),(s,u)=>(y(),L(We,{padding:""},{default:q(()=>[N("div",Xt,[N("div",Yt,[f(K,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=m=>t.value=m),filled:"",type:"search",label:"Search notes"},{prepend:q(()=>[f(z,{name:"search"})]),_:1},8,["modelValue"])]),N("div",Zt,[f(Je,{modelValue:i.value,"onUpdate:modelValue":u[1]||(u[1]=m=>i.value=m),spread:"","no-caps":"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"Grid",value:"grid",icon:"grid_view"},{label:"List",value:"list",icon:"view_list"}]},null,8,["modelValue"])]),N("div",eo,[f(Jt,{onCreateNote:r})]),(y(!0),V(D,null,oe(n.value,m=>(y(),V("div",{key:m.id,class:ee({"col-12":i.value==="list","col-12 col-md-6 col-lg-4":i.value==="grid"})},[f(vt,{note:m,"is-list-view":i.value==="list",onClick:k=>h(m)},null,8,["note","is-list-view","onClick"])],2))),128))]),a.value?(y(),L(Ft,{key:0,note:a.value,onClose:b,onUpdate:l,onDelete:v},null,8,["note"])):E("",!0)]),_:1}))}};export{oo as default};
