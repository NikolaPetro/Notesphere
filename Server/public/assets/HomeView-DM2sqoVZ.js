import{c as A,a as r,h as g,b as K,u as de,g as we,Q as I,d as J,e as fe,f as Se,r as w,w as me,o as qe,T as Ne,i as Ve,_ as W,j as $,k as y,l as P,m as q,n as N,p as V,t as T,q as m,s as D,v as se,x as z,y as R,F as H,z as ae,A as te,B as X,C as Be,D as Ie,E as F,G as Te,H as Pe,I as Y,J as re,K as le,L as Le,M as ve,N as Me,O as Oe,P as je,R as Qe,S as Ue,U as Z,V as Ae,W as Ee,X as ze,Y as De,Z as Fe,$ as Re,a0 as ne,a1 as ge,a2 as he,a3 as be,a4 as $e,a5 as G,a6 as ce,a7 as He,a8 as Ke,a9 as We}from"./index-vc5aXOG9.js";const Ge=A({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:a}){const t=r(()=>{const o=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(i=>e[i]===!0).map(i=>`q-btn-group--${i}`).join(" ");return`q-btn-group row no-wrap${o.length!==0?" "+o:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:t.value},K(a.default))}}),Je=A({name:"QBtnToggle",props:{...de,modelValue:{required:!0},options:{type:Array,required:!0,validator:e=>e.every(a=>("label"in a||"icon"in a||"slot"in a)&&"value"in a)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(e,{slots:a,emit:t}){const o=r(()=>e.options.find(h=>h.value===e.modelValue)!==void 0),i=r(()=>({type:"hidden",name:e.name,value:e.modelValue})),n=fe(i),s=r(()=>we(e)),l=r(()=>({rounded:e.rounded,dense:e.dense,...s.value})),f=r(()=>e.options.map((h,b)=>{const{attrs:C,value:k,slot:B,...x}=h;return{slot:B,props:{key:b,"aria-pressed":k===e.modelValue?"true":"false",...C,...x,...l.value,disable:e.disable===!0||x.disable===!0,color:k===e.modelValue?c(x,"toggleColor"):c(x,"color"),textColor:k===e.modelValue?c(x,"toggleTextColor"):c(x,"textColor"),noCaps:c(x,"noCaps")===!0,noWrap:c(x,"noWrap")===!0,size:c(x,"size"),padding:c(x,"padding"),ripple:c(x,"ripple"),stack:c(x,"stack")===!0,stretch:c(x,"stretch")===!0,onClick(S){v(k,h,S)}}}}));function v(h,b,C){e.readonly!==!0&&(e.modelValue===h?e.clearable===!0&&(t("update:modelValue",null,null),t("clear")):t("update:modelValue",h,b),t("click",C))}function c(h,b){return h[b]===void 0?e[b]:h[b]}function d(){const h=f.value.map(b=>g(I,b.props,b.slot!==void 0?a[b.slot]:void 0));return e.name!==void 0&&e.disable!==!0&&o.value===!0&&n(h,"push"),J(a.default,h)}return()=>g(Ge,{class:"q-btn-toggle",...s.value,rounded:e.rounded,stretch:e.stretch,glossy:e.glossy,spread:e.spread},d)}}),pe=Se("notesStore",()=>{const e=w([]),a=async()=>{const n=await fetch("http://localhost:3000/");e.value=await n.json()};return{notes:e,fetchNotes:a,addNote:async n=>{const l=await(await fetch("http://localhost:3000/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json();e.value.push(l)},updateNote:async(n,s)=>{await fetch(`http://localhost:3000/${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),await a()},deleteNote:async n=>{await fetch(`http://localhost:3000/${n}`,{method:"DELETE"}),e.value=e.value.filter(s=>s.id!==n)}}}),Xe={ratio:[String,Number]};function Ye(e,a){return r(()=>{const t=Number(e.ratio||(a!==void 0?a.value:void 0));return isNaN(t)!==!0&&t>0?{paddingBottom:`${100/t}%`}:null})}const Ze=16/9,oe=A({name:"QImg",props:{...Xe,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ze},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:t}){const o=w(e.initialRatio),i=Ye(e,o);let n=null,s=!1;const l=[w(null),w(B())],f=w(0),v=w(!1),c=w(!1),d=r(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),h=r(()=>({width:e.width,height:e.height})),b=r(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),C=r(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));me(()=>k(),x);function k(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function B(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function x(u){n!==null&&(clearTimeout(n),n=null),c.value=!1,u===null?(v.value=!1,l[f.value^1].value=B()):v.value=!0,l[f.value].value=u}function S({target:u}){s!==!0&&(n!==null&&(clearTimeout(n),n=null),o.value=u.naturalHeight===0?.5:u.naturalWidth/u.naturalHeight,L(u,1))}function L(u,O){s===!0||O===1e3||(u.complete===!0?j(u):n=setTimeout(()=>{n=null,L(u,O+1)},50))}function j(u){s!==!0&&(f.value=f.value^1,l[f.value].value=null,v.value=!1,c.value=!1,t("load",u.currentSrc||u.src))}function Q(u){n!==null&&(clearTimeout(n),n=null),v.value=!1,c.value=!0,l[f.value].value=null,l[f.value^1].value=B(),t("error",u)}function M(u){const O=l[u].value,U={key:"img_"+u,class:b.value,style:C.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...O};return f.value===u?(U.class+=" q-img__image--waiting",Object.assign(U,{onLoad:S,onError:Q})):U.class+=" q-img__image--loaded",g("div",{class:"q-img__container absolute-full",key:"img"+u},g("img",U))}function _(){return v.value!==!0?g("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},K(a[c.value===!0?"error":"default"])):g("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():e.noSpinner===!0?void 0:[g(Ve,{color:e.spinnerColor,size:e.spinnerSize})])}return x(k()),qe(()=>{s=!0,n!==null&&(clearTimeout(n),n=null)}),()=>{const u=[];return i.value!==null&&u.push(g("div",{key:"filler",style:i.value})),c.value!==!0&&(l[0].value!==null&&u.push(M(0)),l[1].value!==null&&u.push(M(1))),u.push(g(Ne,{name:"q-transition--fade"},_)),g("div",{class:d.value,style:h.value,role:"img","aria-label":e.alt},u)}}}),et={props:{note:Object,onClick:Function,isListView:Boolean},computed:{completedTodos(){return this.note.type==="todo"?this.note.items.filter(e=>e.completed).length:0},totalTodos(){return this.note.type==="todo"?this.note.items.length:0}}},tt={key:0,class:"row items-center q-pa-md"},ot={class:"col"},at={class:"text-h6"},lt={key:0,class:"text-caption text-muted-foreground row items-center"},nt={key:1,class:"text-caption text-muted-foreground ellipsis"},it={class:"text-h6"},st={key:0},rt={key:0,class:"text-caption text-muted-foreground"},ct={class:"text-caption text-muted-foreground row items-center"},ut={key:1},dt={class:"ellipsis"};function ft(e,a,t,o,i,n){const s=$("q-audio");return y(),P(X,{onClick:t.onClick,class:te(["cursor-pointer hover-shadow-lg bg-card text-card-foreground",{"row items-center":t.isListView}])},{default:q(()=>[t.isListView?(y(),N("div",tt,[V("div",ot,[V("h3",at,T(t.note.title||"Untitled"),1),t.note.type==="todo"?(y(),N("p",lt,[m(D,{name:"check_square",size:"16px",class:"q-mr-xs"}),se(" "+T(n.completedTodos)+"/"+T(n.totalTodos)+" completed ",1)])):(y(),N("p",nt,T(t.note.content),1))]),t.note.image?(y(),P(oe,{key:0,src:t.note.image||"/placeholder.svg",alt:"Note image",class:"col-auto q-ml-md",style:{width:"48px",height:"48px","border-radius":"4px","object-fit":"cover"}},null,8,["src"])):z("",!0)])):(y(),N(H,{key:1},[m(R,null,{default:q(()=>[V("div",it,T(t.note.title||"Untitled"),1)]),_:1}),m(R,null,{default:q(()=>[t.note.type==="todo"?(y(),N("div",st,[(y(!0),N(H,null,ae(t.note.items.slice(0,3),(l,f)=>(y(),N("div",{key:l.id,class:te(["text-body2",{"text-strike text-muted-foreground":l.completed}])},T(l.text||"Untitled item"),3))),128)),t.note.items.length>3?(y(),N("p",rt," +"+T(t.note.items.length-3)+" more items ",1)):z("",!0),V("p",ct,[m(D,{name:"check_square",size:"16px",class:"q-mr-xs"}),se(" "+T(n.completedTodos)+"/"+T(n.totalTodos)+" completed ",1)])])):(y(),N("div",ut,[V("p",dt,T(t.note.content),1),t.note.image?(y(),P(oe,{key:0,src:t.note.image||"/placeholder.svg",alt:"Note image",class:"q-mt-md",style:{width:"100%",height:"128px","border-radius":"4px","object-fit":"cover"}},null,8,["src"])):z("",!0),t.note.voiceMemo?(y(),P(s,{key:1,src:t.note.voiceMemo,controls:"",class:"q-mt-md"},null,8,["src"])):z("",!0)]))]),_:1})],64))]),_:1},8,["onClick","class"])}const mt=W(et,[["render",ft],["__scopeId","data-v-1e2132e1"]]),vt=g("div",{class:"q-space"}),gt=A({name:"QSpace",setup(){return()=>vt}});function ht(e,a){const t=w(null),o=r(()=>e.disable===!0?null:g("span",{ref:t,class:"no-outline",tabindex:-1}));function i(n){const s=a.value;n!==void 0&&n.type.indexOf("key")===0?s!==null&&document.activeElement!==s&&s.contains(document.activeElement)===!0&&s.focus():t.value!==null&&(n===void 0||s!==null&&s.contains(n.target)===!0)&&t.value.focus()}return{refocusTargetEl:o,refocusTarget:i}}const bt={xs:30,sm:35,md:40,lg:50,xl:60},pt={...Te,...Pe,...de,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},yt=["update:modelValue"];function _t(e,a){const{props:t,slots:o,emit:i,proxy:n}=Y(),{$q:s}=n,l=Be(t,s),f=w(null),{refocusTargetEl:v,refocusTarget:c}=ht(t,f),d=Ie(t,bt),h=r(()=>t.val!==void 0&&Array.isArray(t.modelValue)),b=r(()=>{const p=F(t.val);return h.value===!0?t.modelValue.findIndex(E=>F(E)===p):-1}),C=r(()=>h.value===!0?b.value>-1:F(t.modelValue)===F(t.trueValue)),k=r(()=>h.value===!0?b.value===-1:F(t.modelValue)===F(t.falseValue)),B=r(()=>C.value===!1&&k.value===!1),x=r(()=>t.disable===!0?-1:t.tabindex||0),S=r(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(t.disable===!0?" disabled":"")+(l.value===!0?` q-${e}--dark`:"")+(t.dense===!0?` q-${e}--dense`:"")+(t.leftLabel===!0?" reverse":"")),L=r(()=>{const p=C.value===!0?"truthy":k.value===!0?"falsy":"indet",E=t.color!==void 0&&(t.keepColor===!0||(e==="toggle"?C.value===!0:k.value!==!0))?` text-${t.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${p}${E}`}),j=r(()=>{const p={type:"checkbox"};return t.name!==void 0&&Object.assign(p,{".checked":C.value,"^checked":C.value===!0?"checked":void 0,name:t.name,value:h.value===!0?t.val:t.trueValue}),p}),Q=fe(j),M=r(()=>{const p={tabindex:x.value,role:e==="toggle"?"switch":"checkbox","aria-label":t.label,"aria-checked":B.value===!0?"mixed":C.value===!0?"true":"false"};return t.disable===!0&&(p["aria-disabled"]="true"),p});function _(p){p!==void 0&&(re(p),c(p)),t.disable!==!0&&i("update:modelValue",u(),p)}function u(){if(h.value===!0){if(C.value===!0){const p=t.modelValue.slice();return p.splice(b.value,1),p}return t.modelValue.concat([t.val])}if(C.value===!0){if(t.toggleOrder!=="ft"||t.toggleIndeterminate===!1)return t.falseValue}else if(k.value===!0){if(t.toggleOrder==="ft"||t.toggleIndeterminate===!1)return t.trueValue}else return t.toggleOrder!=="ft"?t.trueValue:t.falseValue;return t.indeterminateValue}function O(p){(p.keyCode===13||p.keyCode===32)&&re(p)}function U(p){(p.keyCode===13||p.keyCode===32)&&_(p)}const xe=a(C,B);return Object.assign(n,{toggle:_}),()=>{const p=xe();t.disable!==!0&&Q(p,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const E=[g("div",{class:L.value,style:d.value,"aria-hidden":"true"},p)];v.value!==null&&E.push(v.value);const ie=t.label!==void 0?J(o.default,[t.label]):K(o.default);return ie!==void 0&&E.push(g("div",{class:`q-${e}__label q-anchor--skip`},ie)),g("div",{ref:f,class:S.value,...M.value,onClick:_,onKeydown:O,onKeyup:U},E)}}const kt=g("div",{key:"svg",class:"q-checkbox__bg absolute"},[g("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[g("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),g("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Ct=A({name:"QCheckbox",props:pt,emits:yt,setup(e){function a(t,o){const i=r(()=>(t.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[g("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[g(D,{class:"q-checkbox__icon",name:i.value})])]:[kt]}return _t("checkbox",a)}}),xt=["top","right","bottom","left"],ye={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>xt.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function _e(e,a){return{formClass:r(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:r(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:r(()=>{if(e.externalLabel===!0){const t=e.hideLabel===null?a.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(t===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ke={start:"self-end",center:"self-center",end:"self-start"},wt=Object.keys(ke),ee=A({name:"QFabAction",props:{...ye,icon:{type:String,default:""},anchor:{type:String,validator:e=>wt.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:a,emit:t}){const o=le(ve,()=>({showing:{value:!0},onChildClick:Le})),{formClass:i,labelProps:n}=_e(e,o.showing),s=r(()=>{const d=ke[e.anchor];return i.value+(d!==void 0?` ${d}`:"")}),l=r(()=>e.disable===!0||o.showing.value!==!0);function f(d){o.onChildClick(d),t("click",d)}function v(){const d=[];return a.icon!==void 0?d.push(a.icon()):e.icon!==""&&d.push(g(D,{name:e.icon})),(e.label!==""||a.label!==void 0)&&d[n.value.action](g("div",n.value.data,a.label!==void 0?a.label():[e.label])),J(a.default,d)}const c=Y();return Object.assign(c.proxy,{click:f}),()=>g(I,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,onClick:f},v)}}),St=["up","right","down","left"],qt=["left","center","right"],Nt=A({name:"QFab",props:{...ye,...Me,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>St.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>qt.includes(e)}},emits:Oe,setup(e,{slots:a}){const t=w(null),o=w(e.modelValue===!0),i=je(),{proxy:{$q:n}}=Y(),{formClass:s,labelProps:l}=_e(e,o),f=r(()=>e.persistent!==!0),{hide:v,toggle:c}=Qe({showing:o,hideOnRouteChange:f}),d=r(()=>({opened:o.value})),h=r(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${s.value}`+(o.value===!0?" q-fab--opened":" q-fab--closed")),b=r(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${o.value===!0?"opened":"closed"}`),C=r(()=>{const S={id:i,role:"menu"};return o.value!==!0&&(S["aria-hidden"]="true"),S}),k=r(()=>`q-fab__icon-holder  q-fab__icon-holder--${o.value===!0?"opened":"closed"}`);function B(S,L){const j=a[S],Q=`q-fab__${S} absolute-full`;return j===void 0?g(D,{class:Q,name:e[L]||n.iconSet.fab[L]}):g("div",{class:Q},j(d.value))}function x(){const S=[];return e.hideIcon!==!0&&S.push(g("div",{class:k.value},[B("icon","icon"),B("active-icon","activeIcon")])),(e.label!==""||a.label!==void 0)&&S[l.value.action](g("div",l.value.data,a.label!==void 0?a.label(d.value):[e.label])),J(a.tooltip,S)}return Ue(ve,{showing:o,onChildClick(S){v(S),t.value!==null&&t.value.$el.focus()}}),()=>g("div",{class:h.value},[g(I,{ref:t,class:s.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":o.value===!0?"true":"false","aria-haspopup":"true","aria-controls":i,onClick:c},x),g("div",{class:b.value,...C.value},K(a.default))])}}),Vt={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Bt(){const{props:e,proxy:{$q:a}}=Y(),t=le(Ae,Z);if(t===Z)return console.error("QPageSticky needs to be child of QLayout"),Z;const o=r(()=>{const d=e.position;return{top:d.indexOf("top")>-1,right:d.indexOf("right")>-1,bottom:d.indexOf("bottom")>-1,left:d.indexOf("left")>-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),i=r(()=>t.header.offset),n=r(()=>t.right.offset),s=r(()=>t.footer.offset),l=r(()=>t.left.offset),f=r(()=>{let d=0,h=0;const b=o.value,C=a.lang.rtl===!0?-1:1;b.top===!0&&i.value!==0?h=`${i.value}px`:b.bottom===!0&&s.value!==0&&(h=`${-s.value}px`),b.left===!0&&l.value!==0?d=`${C*l.value}px`:b.right===!0&&n.value!==0&&(d=`${-C*n.value}px`);const k={transform:`translate(${d}, ${h})`};return e.offset&&(k.margin=`${e.offset[1]}px ${e.offset[0]}px`),b.vertical===!0?(l.value!==0&&(k[a.lang.rtl===!0?"right":"left"]=`${l.value}px`),n.value!==0&&(k[a.lang.rtl===!0?"left":"right"]=`${n.value}px`)):b.horizontal===!0&&(i.value!==0&&(k.top=`${i.value}px`),s.value!==0&&(k.bottom=`${s.value}px`)),k}),v=r(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function c(d){const h=K(d.default);return g("div",{class:v.value,style:f.value},e.expand===!0?h:[g("div",h)])}return{$layout:t,getStickyContent:c}}const It=A({name:"QPageSticky",props:Vt,setup(e,{slots:a}){const{getStickyContent:t}=Bt();return()=>t(a)}});function ue(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const Ce=Ee({name:"close-popup",beforeMount(e,{value:a}){const t={depth:ue(a),handler(o){t.depth!==0&&setTimeout(()=>{const i=ze(e);i!==void 0&&De(i,o,t.depth)})},handlerKey(o){Fe(o,13)===!0&&t.handler(o)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:a,oldValue:t}){a!==t&&(e.__qclosepopup.depth=ue(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});function Tt(){return le(Re)}const Pt={name:"CameraPreview",emits:["capture","close"],setup(e,{emit:a}){const t=w(null);let o=null;const i=async()=>{try{o=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),t.value&&(t.value.srcObject=o)}catch(l){console.error("Error accessing camera:",l),a("close")}},n=()=>{o&&o.getTracks().forEach(l=>l.stop())},s=()=>{const l=document.createElement("canvas");l.width=t.value.videoWidth,l.height=t.value.videoHeight,l.getContext("2d").drawImage(t.value,0,0);const f=l.toDataURL("image/jpeg");a("capture",f),n()};return ne(()=>{i()}),ge(()=>{n()}),{videoElement:t,captureImage:s}}},Lt={ref:"videoElement",autoplay:"",playsinline:"",class:"full-width"};function Mt(e,a,t,o,i,n){return y(),P(X,{class:"camera-preview"},{default:q(()=>[m(R,null,{default:q(()=>[V("video",Lt,null,512)]),_:1}),m(he,{align:"right"},{default:q(()=>[be(m(I,{flat:"",label:"Close",color:"primary"},null,512),[[Ce]]),m(I,{flat:"",label:"Capture",color:"primary",onClick:o.captureImage},null,8,["onClick"])]),_:1})]),_:1})}const Ot=W(Pt,[["render",Mt],["__scopeId","data-v-a46b76bb"]]),jt={name:"NoteModal",components:{CameraPreview:Ot},props:{note:{type:Object,required:!0}},emits:["update","delete","close"],setup(e,{emit:a}){const t=Tt(),o=w(!0),i=$e({...e.note}),n=w(null),s=w(!1),l=w(!1),f=w(null),v=w([]);me(()=>e.note,_=>{Object.assign(i,_)});const c=()=>{d(i)?a("delete",i.id):a("update",i),a("close")},d=_=>_.title.trim()===""&&_.content.trim()===""&&!_.image&&!_.voiceMemo&&(_.type!=="todo"||_.items&&_.items.every(u=>u.text.trim()==="")),h=()=>{a("update",i),o.value=!1},b=()=>{t.dialog({title:"Confirm",message:"Are you sure you want to delete this note?",cancel:!0,persistent:!0}).onOk(()=>{a("delete",i.id),o.value=!1})},C=()=>{i.type==="todo"&&i.items.push({id:Date.now(),text:"",completed:!1})},k=(_,u)=>{i.type==="todo"&&(i.items[_].text=u)},B=()=>{n.value.click()},x=_=>{const u=_.target.files[0];if(u){const O=new FileReader;O.onload=U=>{i.image=U.target.result},O.readAsDataURL(u)}},S=()=>{i.image=null},L=()=>{s.value=!0},j=_=>{i.image=_,s.value=!1},Q=async()=>{if(l.value)M();else try{const _=await navigator.mediaDevices.getUserMedia({audio:!0});f.value=new MediaRecorder(_),f.value.ondataavailable=u=>{v.value.push(u.data)},f.value.onstop=()=>{const u=new Blob(v.value,{type:"audio/webm"});i.voiceMemo=URL.createObjectURL(u),v.value=[]},f.value.start(),l.value=!0}catch(_){console.error("Error accessing microphone:",_),t.notify({color:"negative",message:"Error accessing microphone. Please check your permissions."})}},M=()=>{f.value&&f.value.state!=="inactive"&&(f.value.stop(),l.value=!1)};return ne(()=>{window.addEventListener("beforeunload",M)}),ge(()=>{window.removeEventListener("beforeunload",M),M()}),{showModal:o,editedNote:i,fileInput:n,showCamera:s,recording:l,closeModal:c,saveNote:h,deleteNote:b,addTodoItem:C,updateTodoItem:k,triggerFileInput:B,handleFileUpload:x,removeImage:S,openCamera:L,handleCameraCapture:j,toggleRecording:Q}}},Qt={class:"text-h6"},Ut={key:2,class:"q-mt-md"},At={class:"absolute-top-right"},Et={key:3,class:"q-mt-md"},zt=["src"];function Dt(e,a,t,o,i,n){const s=$("camera-preview");return y(),P(ce,{modelValue:o.showModal,"onUpdate:modelValue":a[5]||(a[5]=l=>o.showModal=l),onHide:o.closeModal,maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:q(()=>[m(X,{class:"column full-height"},{default:q(()=>[m(R,{class:"row items-center q-pb-none"},{default:q(()=>[V("div",Qt,T(o.editedNote.title||"Untitled"),1),m(gt),be(m(I,{icon:"close",flat:"",round:"",dense:""},null,512),[[Ce]])]),_:1}),m(R,{class:"q-pa-sm flex-grow-1 overflow-auto"},{default:q(()=>[m(G,{modelValue:o.editedNote.title,"onUpdate:modelValue":a[0]||(a[0]=l=>o.editedNote.title=l),label:"Title",dense:"",autofocus:"",class:"q-mb-md"},null,8,["modelValue"]),o.editedNote.type==="todo"?(y(),N(H,{key:0},[(y(!0),N(H,null,ae(o.editedNote.items,(l,f)=>(y(),N("div",{key:l.id,class:"q-mb-sm"},[m(Ct,{modelValue:l.completed,"onUpdate:modelValue":[v=>l.completed=v,v=>o.updateTodoItem(f,l.text)],label:l.text},null,8,["modelValue","onUpdate:modelValue","label"]),m(G,{modelValue:l.text,"onUpdate:modelValue":[v=>l.text=v,v=>o.updateTodoItem(f,v)],dense:"",class:"q-ml-lg"},null,8,["modelValue","onUpdate:modelValue"])]))),128)),m(I,{label:"Add Item",icon:"add",color:"primary",onClick:o.addTodoItem,class:"q-mt-sm"},null,8,["onClick"])],64)):(y(),P(G,{key:1,modelValue:o.editedNote.content,"onUpdate:modelValue":a[1]||(a[1]=l=>o.editedNote.content=l),type:"textarea",label:"Content",autogrow:""},null,8,["modelValue"])),o.editedNote.image?(y(),N("div",Ut,[m(oe,{src:o.editedNote.image,"spinner-color":"primary",style:{"max-height":"600px"}},{default:q(()=>[V("div",At,[m(I,{round:"",color:"negative",icon:"delete",size:"sm",onClick:o.removeImage},null,8,["onClick"])])]),_:1},8,["src"])])):z("",!0),o.editedNote.voiceMemo?(y(),N("div",Et,[V("audio",{src:o.editedNote.voiceMemo,controls:"",class:"full-width"},null,8,zt)])):z("",!0)]),_:1}),m(he,{position:"bottom-left"},{default:q(()=>[m(I,{flat:"",color:"negative",label:"Delete",onClick:o.deleteNote},null,8,["onClick"]),m(I,{flat:"",color:"primary",label:"Save",onClick:o.saveNote},null,8,["onClick"])]),_:1}),m(It,{position:"bottom-right",offset:[18,18]},{default:q(()=>[m(Nt,{icon:"add",direction:"up",color:"primary"},{default:q(()=>[m(ee,{color:"primary",icon:"attach_file",onClick:o.triggerFileInput},null,8,["onClick"]),m(ee,{color:"primary",icon:"photo_camera",onClick:o.openCamera},null,8,["onClick"]),m(ee,{color:"primary",icon:o.recording?"stop":"mic",onClick:o.toggleRecording},null,8,["icon","onClick"])]),_:1})]),_:1})]),_:1}),V("input",{type:"file",ref:"fileInput",accept:"image/*",style:{display:"none"},onChange:a[2]||(a[2]=(...l)=>o.handleFileUpload&&o.handleFileUpload(...l))},null,544),m(ce,{modelValue:o.showCamera,"onUpdate:modelValue":a[4]||(a[4]=l=>o.showCamera=l)},{default:q(()=>[m(s,{onCapture:o.handleCameraCapture,onClose:a[3]||(a[3]=l=>o.showCamera=!1)},null,8,["onCapture"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue","onHide"])}const Ft=W(jt,[["render",Dt],["__scopeId","data-v-d2ac1886"]]),Rt={name:"QuickCreateArea",emits:["create-note"],setup(e,{emit:a}){const t=w(!1),o=pe();return{expanded:t,expandArea:()=>{t.value=!0},createNote:async s=>{const l={title:"",content:"",type:s,...s==="todo"?{items:[]}:{}};await o.addNote(l),a("create-note",l),t.value=!1}}}},$t=e=>(He("data-v-6037507c"),e=e(),Ke(),e),Ht={key:0,class:"row items-center"},Kt=$t(()=>V("div",{class:"text-primary q-ml-sm"},"Click to create...",-1)),Wt={key:1,class:"column q-gutter-y-sm"};function Gt(e,a,t,o,i,n){return y(),P(X,{class:"quick-create-area cursor-pointer",onClick:o.expandArea},{default:q(()=>[m(R,null,{default:q(()=>[o.expanded?(y(),N("div",Wt,[m(I,{flat:"",color:"primary",icon:"note_add",label:"Create a new note",onClick:a[0]||(a[0]=s=>o.createNote("note"))}),m(I,{flat:"",color:"primary",icon:"checklist",label:"Create a to-do list",onClick:a[1]||(a[1]=s=>o.createNote("todo"))})])):(y(),N("div",Ht,[m(D,{name:"add",size:"sm",color:"primary"}),Kt]))]),_:1})]),_:1},8,["onClick"])}const Jt=W(Rt,[["render",Gt],["__scopeId","data-v-6037507c"]]),Xt={name:"NotesPage",components:{NoteCard:mt,NoteModal:Ft,QuickCreateArea:Jt},setup(){const e=pe(),a=w(""),t=w(null),o=w("grid"),i=r(()=>e.notes.filter(c=>c.title.toLowerCase().includes(a.value.toLowerCase())||c.content.toLowerCase().includes(a.value.toLowerCase()))),n=async c=>{const d={title:"",content:"",type:c,...c==="todo"?{items:[]}:{}};await e.addNote(d),t.value=d},s=async c=>{await e.updateNote(c.id,c),t.value=null},l=async c=>{await e.deleteNote(c),t.value=null},f=c=>{t.value=c},v=()=>{t.value=null};return ne(()=>{e.fetchNotes()}),{searchTerm:a,selectedNote:t,viewType:o,filteredNotes:i,createNote:n,updateNote:s,deleteNote:l,openNoteModal:f,closeNoteModal:v}}},Yt={class:"row q-col-gutter-md"},Zt={class:"col-12"},eo={class:"col-12"},to={class:"col-12"};function oo(e,a,t,o,i,n){const s=$("quick-create-area"),l=$("note-card"),f=$("note-modal");return y(),P(We,{padding:""},{default:q(()=>[V("div",Yt,[V("div",Zt,[m(G,{modelValue:o.searchTerm,"onUpdate:modelValue":a[0]||(a[0]=v=>o.searchTerm=v),filled:"",type:"search",label:"Search notes"},{prepend:q(()=>[m(D,{name:"search"})]),_:1},8,["modelValue"])]),V("div",eo,[m(Je,{modelValue:o.viewType,"onUpdate:modelValue":a[1]||(a[1]=v=>o.viewType=v),spread:"","no-caps":"","toggle-color":"primary",color:"white","text-color":"primary",options:[{label:"Grid",value:"grid",icon:"grid_view"},{label:"List",value:"list",icon:"view_list"}]},null,8,["modelValue"])]),V("div",to,[m(s,{onCreateNote:o.createNote},null,8,["onCreateNote"])]),(y(!0),N(H,null,ae(o.filteredNotes,v=>(y(),N("div",{key:v.id,class:te({"col-12":o.viewType==="list","col-12 col-md-6 col-lg-4":o.viewType==="grid"})},[m(l,{note:v,"is-list-view":o.viewType==="list",onClick:c=>o.openNoteModal(v)},null,8,["note","is-list-view","onClick"])],2))),128))]),o.selectedNote?(y(),P(f,{key:0,note:o.selectedNote,onClose:o.closeNoteModal,onUpdate:o.updateNote,onDelete:o.deleteNote},null,8,["note","onClose","onUpdate","onDelete"])):z("",!0)]),_:1})}const lo=W(Xt,[["render",oo]]);export{lo as default};
